System.register(["./index-legacy-CUEbsImb.js","./Button-legacy-Ct7QJn9V.js","./Input-legacy-BMd5SFgd.js","./x-legacy-BlIqKpfv.js","./save-legacy-BBIf64GU.js","./user-legacy-DejxndzK.js"],function(e,l){"use strict";var a,s,t,n,i,o,d,r,c,g,m,h,u;return{setters:[e=>{a=e.c,s=e.r,t=e.j,n=e.L,i=e.M,o=e.i,d=e.N,r=e.O},e=>{c=e.B},e=>{g=e.I},e=>{m=e.X},e=>{h=e.S},e=>{u=e.U}],execute:function(){
/**
       * @license lucide-react v0.556.0 - ISC
       *
       * This source code is licensed under the ISC license.
       * See the LICENSE file in the root directory of this source tree.
       */
const l=a("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),x=a("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),b=a("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e("H",({members:e,onChange:a,readOnly:v=!1,latestSafetyStatusByMember:j={}})=>{const[p,f]=s.useState(!1),[y,N]=s.useState(null),[M,F]=s.useState({id:"",name:"",age:"",needs:"",mobilityFlag:!1,medicalFlag:!1,loginEnabled:!1,loginPhone:""}),k=e=>{const l=d(e).slice(0,15);return l.length<=10?l.length<4?l:l.length<7?`(${l.slice(0,3)}) ${l.slice(3)}`:`(${l.slice(0,3)}) ${l.slice(3,6)}-${l.slice(6,10)}`:`+${l}`},C=()=>{const l=M.name.trim(),s=String(M.age||"").trim();if(!l)return void N("Name is required.");if(!n(s)||null===i(s))return void N("Date of birth is required in MM/DD/YYYY format.");if(M.loginEnabled&&!o(M.loginPhone||""))return void N("A valid member phone is required to enable account invites.");const t=r(s),d=["INFANT","CHILD","SENIOR"].includes(t),c={...M,name:l,age:s,ageGroup:t,mobilityFlag:Boolean(M.mobilityFlag)||d,medicalFlag:Boolean(M.medicalFlag),loginPhone:M.loginEnabled?k(M.loginPhone||""):""},g=e.findIndex(e=>e.id===M.id);let m=[...e];g>=0?m[g]=c:m.push(c),a(m),N(null),f(!1)};return p?t.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 shadow-sm animate-fade-in",children:[t.jsxs("h4",{className:"font-bold text-slate-900 mb-3 flex items-center justify-between",children:[t.jsx("span",{children:e.some(e=>e.id===M.id)?"Edit Member":"Add Family Member"}),t.jsx("button",{onClick:()=>f(!1),className:"text-slate-400 hover:text-slate-600",children:t.jsx(m,{size:20})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(g,{label:"Name",placeholder:"e.g. Sarah Jones",value:M.name,onChange:e=>F({...M,name:e.target.value}),autoFocus:!0}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(g,{label:"Date of Birth",placeholder:"MM/DD/YYYY",value:M.age,onChange:e=>F({...M,age:e.target.value}),error:!M.age||n(M.age)&&null!==i(M.age)?void 0:"Use MM/DD/YYYY"}),t.jsx(g,{label:"Medical/Needs",placeholder:"Optional",value:M.needs,onChange:e=>F({...M,needs:e.target.value})})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Mobility Flag"}),t.jsxs("select",{value:String(Boolean(M.mobilityFlag)),onChange:e=>F({...M,mobilityFlag:"true"===e.target.value}),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all text-slate-900",children:[t.jsx("option",{value:"true",children:"Yes"}),t.jsx("option",{value:"false",children:"No"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Medical Flag"}),t.jsxs("select",{value:String(Boolean(M.medicalFlag)),onChange:e=>F({...M,medicalFlag:"true"===e.target.value}),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all text-slate-900",children:[t.jsx("option",{value:"true",children:"Yes"}),t.jsx("option",{value:"false",children:"No"})]})]})]}),t.jsxs("label",{className:"flex items-center justify-between rounded-lg border border-slate-200 p-3",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Allow account invite (optional)"}),t.jsx("input",{type:"checkbox",checked:Boolean(M.loginEnabled),onChange:e=>F({...M,loginEnabled:e.target.checked})})]}),t.jsx("p",{className:"text-xs text-slate-500 -mt-1",children:"This does not create an account. It only enables invite-code access for this person."}),M.loginEnabled&&t.jsx(g,{label:"Member Mobile Phone *",placeholder:"(555) 123-4567",value:M.loginPhone||"",onChange:e=>F({...M,loginPhone:k(e.target.value)}),error:M.loginPhone&&!o(M.loginPhone)?"Enter a valid phone number":void 0}),y&&t.jsx("p",{className:"text-xs text-red-600 font-semibold",children:y}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[t.jsx(c,{variant:"ghost",fullWidth:!0,onClick:()=>{f(!1),N(null)},children:"Cancel"}),t.jsxs(c,{fullWidth:!0,onClick:C,children:[t.jsx(h,{size:16,className:"mr-2"})," Save Member"]})]})]})]}):t.jsxs("div",{className:"space-y-3",children:[e.length>0?t.jsx("div",{className:"grid gap-2",children:e.map(s=>t.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-3 flex items-center justify-between shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500",children:t.jsx(u,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-900 leading-tight",children:s.name}),t.jsxs("p",{className:"text-xs text-slate-500",children:["DOB: ",s.age||"N/A","boolean"==typeof s.mobilityFlag&&" • Mobility: "+(s.mobilityFlag?"Yes":"No"),"boolean"==typeof s.medicalFlag&&" • Medical: "+(s.medicalFlag?"Yes":"No")," • Account Invite: "+(s.loginEnabled?"Enabled":"Not enabled"),s.loginEnabled&&s.loginPhone&&` • ${s.loginPhone}`,s.needs&&` • ${s.needs}`]}),j[s.id]&&t.jsxs("p",{className:"text-[11px] mt-0.5 font-semibold "+("DANGER"===j[s.id].status?"text-red-700":"text-emerald-700"),children:["Latest safety status: ",j[s.id].status,j[s.id].at?` • ${new Date(j[s.id].at).toLocaleString()}`:""]})]})]}),!v&&t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>(e=>{F({...e,mobilityFlag:Boolean(e.mobilityFlag),medicalFlag:Boolean(e.medicalFlag),loginEnabled:Boolean(e.loginEnabled),loginPhone:e.loginPhone||""}),N(null),f(!0)})(s),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",children:t.jsx(l,{size:16})}),t.jsx("button",{onClick:()=>{return l=s.id,void(confirm("Remove this member?")&&a(e.filter(e=>e.id!==l)));var l},className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:t.jsx(b,{size:16})})]})]},s.id))}):t.jsx("div",{className:"text-center p-4 bg-slate-50 rounded-xl border border-dashed border-slate-300 text-slate-500 text-sm",children:"No household members added yet."}),!v&&t.jsxs(c,{variant:"outline",fullWidth:!0,onClick:()=>{F({id:Date.now().toString(),name:"",age:"",needs:"",mobilityFlag:!1,medicalFlag:!1,loginEnabled:!1,loginPhone:""}),N(null),f(!0)},className:"border-dashed border-slate-300 text-slate-600 hover:border-brand-400 hover:text-brand-600",children:[t.jsx(x,{size:18,className:"mr-2"})," Add Member"]})]})})}}});
