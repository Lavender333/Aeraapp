System.register(["./index-legacy-CBJaRI7y.js","./translations-legacy-CsVMiQJ8.js","./inventoryStatus-legacy-CxjfWrqf.js","./arrow-left-legacy-BCEH-quZ.js","./truck-legacy-CzVSMvou.js","./map-pin-legacy-_ytGCQvV.js","./navigation-legacy-Cgr2GBqX.js"],function(e,t){"use strict";var s,n,a,r,l,i,d,o,c;return{setters:[e=>{s=e.r,n=e.S,a=e.j},e=>{r=e.t},e=>{l=e.g},e=>{i=e.A},e=>{d=e.T},e=>{o=e.M},e=>{c=e.N}],execute:function(){const t={water:42,food:35,blankets:28,medicalKits:18};e("LogisticsView",({setView:e})=>{const[b,x]=s.useState(null),[m,g]=s.useState({water:0,food:0,blankets:0,medicalKits:0}),[h,u]=s.useState(0);s.useEffect(()=>{const e=n.getProfile().communityId||"CH-9921",t=n.getOrganization(e);x(t),g(n.getOrgInventory(e)),u(n.getOrgMembers(e).length),n.fetchOrgInventoryRemote(e).then(({inventory:e})=>{g(e)}),n.fetchOrgMembersRemote(e).then(({members:e})=>{u(e.length)});const s=()=>{g(n.getOrgInventory(e)),u(n.getOrgMembers(e).length)};return window.addEventListener("inventory-update",s),window.addEventListener("storage",s),()=>{window.removeEventListener("inventory-update",s),window.removeEventListener("storage",s)}},[]);const p=h||(null==b?void 0:b.registeredPopulation)||0,j=l(m,p),f=t.water+t.food+t.blankets+t.medicalKits,v=[{label:"Water",key:"water",unit:"cases",count:t.water},{label:"Food",key:"food",unit:"boxes",count:t.food},{label:"Blankets",key:"blankets",unit:"units",count:t.blankets},{label:"Med Kits",key:"medicalKits",unit:"kits",count:t.medicalKits}].map(e=>({...e,percentage:Number((e.count/f*100).toFixed(1))}));return a.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col pb-safe animate-fade-in",children:[a.jsx("div",{className:"bg-white border-b border-slate-200 p-4 sticky top-0 z-20",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>e("DASHBOARD"),className:"p-2 -ml-2 text-slate-500 hover:text-slate-800",children:a.jsx(i,{size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-bold text-lg text-slate-900",children:r("logistics.title")}),a.jsx("p",{className:"text-xs text-slate-500",children:r("logistics.subtitle")})]})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"bg-brand-50 border border-brand-100 p-4 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-3 bg-brand-100 rounded-lg text-brand-700",children:a.jsx(d,{size:24})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-brand-900",children:r("logistics.depot")}),b?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-lg font-bold text-brand-800 leading-tight mt-1",children:b.name}),a.jsxs("div",{className:"flex items-start gap-1.5 mt-2 text-brand-700",children:[a.jsx(o,{size:16,className:"mt-0.5 shrink-0"}),a.jsx("p",{className:"text-sm font-medium",children:b.address})]}),a.jsxs("button",{onClick:()=>{if(null!=b&&b.address){const e=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(b.address)}`;window.open(e,"_blank")}},className:"mt-3 flex items-center gap-1 text-xs font-bold text-brand-700 bg-white/50 px-3 py-1.5 rounded border border-brand-200 hover:bg-white transition-colors",children:[a.jsx(c,{size:12})," Get Directions"]})]}):a.jsx("p",{className:"text-sm text-brand-700 animate-pulse mt-1",children:"Locating nearest hub..."}),a.jsxs("div",{className:"mt-4 pt-3 border-t border-brand-200/50",children:[a.jsx("p",{className:"text-[10px] uppercase font-bold text-brand-600 mb-2",children:"Current Stock Levels"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{label:"Water",key:"water",unit:"cases"},{label:"Food",key:"food",unit:"boxes"},{label:"Blankets",key:"blankets",unit:"units"},{label:"Med Kits",key:"medicalKits",unit:"kits"}].map(e=>{const t=j[e.key].level,s="HIGH"===t?"text-green-700 border-green-200 bg-green-50":"MEDIUM"===t?"text-amber-700 border-amber-200 bg-amber-50":"LOW"===t?"text-red-700 border-red-200 bg-red-50":"text-slate-500 border-slate-200 bg-white";return a.jsxs("div",{className:`text-xs px-3 py-2 rounded border font-bold shadow-sm ${s} flex justify-between`,children:[a.jsx("span",{children:e.label}),a.jsx("span",{children:"UNKNOWN"===t?"N/A":t})]},e.label)})})]}),a.jsxs("div",{className:"mt-4 pt-3 border-t border-brand-200/50 space-y-2",children:[a.jsx("p",{className:"text-[10px] uppercase font-bold text-brand-600",children:"Nearest Resource Depot"}),v.map(e=>a.jsxs("div",{className:"rounded-lg border border-brand-100 bg-white p-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold text-slate-700 mb-1",children:[a.jsxs("span",{children:[e.label," (",e.count," ",e.unit,")"]}),a.jsxs("span",{children:[e.percentage.toFixed(1),"%"]})]}),a.jsx("div",{className:"h-2 rounded bg-brand-100 overflow-hidden",children:a.jsx("div",{className:"h-full bg-brand-600",style:{width:`${e.percentage}%`}})})]},e.key))]})]})]})}),a.jsx("div",{className:"pt-2",children:a.jsxs("button",{onClick:()=>e("DASHBOARD"),className:"w-full inline-flex items-center justify-center gap-2 rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-100 transition-colors",children:[a.jsx(i,{size:16})," Back to Dashboard"]})})]})]})})}}});
