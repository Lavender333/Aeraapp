import{c as g,r as c,j as e,L as v,M as j,i as N,N as Y,O as C}from"./index-DBXkWCLS.js";import{B as h}from"./Button-BRkmOIV9.js";import{I as r}from"./Input-Cb4un1zL.js";import{X as w}from"./x-Sldg548w.js";import{S as I}from"./save-DMVSdkvO.js";import{U as S}from"./user-DRxH_l0O.js";/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],B=g("pen",$);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],z=g("plus",A);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],H=g("trash-2",_),T=({members:o,onChange:u})=>{const[y,i]=c.useState(!1),[x,n]=c.useState(null),[a,t]=c.useState({id:"",name:"",age:"",needs:"",mobilityFlag:!1,medicalFlag:!1,loginEnabled:!1,loginPhone:""}),m=l=>{const s=Y(l).slice(0,15);return s.length<=10?s.length<4?s:s.length<7?"(".concat(s.slice(0,3),") ").concat(s.slice(3)):"(".concat(s.slice(0,3),") ").concat(s.slice(3,6),"-").concat(s.slice(6,10)):"+".concat(s)},M=()=>{t({id:Date.now().toString(),name:"",age:"",needs:"",mobilityFlag:!1,medicalFlag:!1,loginEnabled:!1,loginPhone:""}),n(null),i(!0)},F=l=>{t({...l,mobilityFlag:!!l.mobilityFlag,medicalFlag:!!l.medicalFlag,loginEnabled:!!l.loginEnabled,loginPhone:l.loginPhone||""}),n(null),i(!0)},E=l=>{confirm("Remove this member?")&&u(o.filter(s=>s.id!==l))},k=()=>{const l=a.name.trim(),s=String(a.age||"").trim();if(!l){n("Name is required.");return}if(!v(s)||j(s)===null){n("Date of birth is required in MM/DD/YYYY format.");return}if(a.loginEnabled&&!N(a.loginPhone||"")){n("A valid member phone is required to enable account invites.");return}const b=C(s),P=["INFANT","CHILD","SENIOR"].includes(b),p={...a,name:l,age:s,ageGroup:b,mobilityFlag:!!a.mobilityFlag||P,medicalFlag:!!a.medicalFlag,loginPhone:a.loginEnabled?m(a.loginPhone||""):""},f=o.findIndex(D=>D.id===a.id);let d=[...o];f>=0?d[f]=p:d.push(p),u(d),n(null),i(!1)};return y?e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 shadow-sm animate-fade-in",children:[e.jsxs("h4",{className:"font-bold text-slate-900 mb-3 flex items-center justify-between",children:[e.jsx("span",{children:o.some(l=>l.id===a.id)?"Edit Member":"Add Family Member"}),e.jsx("button",{onClick:()=>i(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(w,{size:20})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{label:"Name",placeholder:"e.g. Sarah Jones",value:a.name,onChange:l=>t({...a,name:l.target.value}),autoFocus:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(r,{label:"Date of Birth",placeholder:"MM/DD/YYYY",value:a.age,onChange:l=>t({...a,age:l.target.value}),error:a.age&&(!v(a.age)||j(a.age)===null)?"Use MM/DD/YYYY":void 0}),e.jsx(r,{label:"Medical/Needs",placeholder:"Optional",value:a.needs,onChange:l=>t({...a,needs:l.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Mobility Flag"}),e.jsxs("select",{value:String(!!a.mobilityFlag),onChange:l=>t({...a,mobilityFlag:l.target.value==="true"}),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all text-slate-900",children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Medical Flag"}),e.jsxs("select",{value:String(!!a.medicalFlag),onChange:l=>t({...a,medicalFlag:l.target.value==="true"}),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all text-slate-900",children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})]})]}),e.jsxs("label",{className:"flex items-center justify-between rounded-lg border border-slate-200 p-3",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Allow account invite (optional)"}),e.jsx("input",{type:"checkbox",checked:!!a.loginEnabled,onChange:l=>t({...a,loginEnabled:l.target.checked})})]}),e.jsx("p",{className:"text-xs text-slate-500 -mt-1",children:"This does not create an account. It only enables invite-code access for this person."}),a.loginEnabled&&e.jsx(r,{label:"Member Mobile Phone *",placeholder:"(555) 123-4567",value:a.loginPhone||"",onChange:l=>t({...a,loginPhone:m(l.target.value)}),error:a.loginPhone&&!N(a.loginPhone)?"Enter a valid phone number":void 0}),x&&e.jsx("p",{className:"text-xs text-red-600 font-semibold",children:x}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(h,{variant:"ghost",fullWidth:!0,onClick:()=>{i(!1),n(null)},children:"Cancel"}),e.jsxs(h,{fullWidth:!0,onClick:k,children:[e.jsx(I,{size:16,className:"mr-2"})," Save Member"]})]})]})]}):e.jsxs("div",{className:"space-y-3",children:[o.length>0?e.jsx("div",{className:"grid gap-2",children:o.map(l=>e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-3 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500",children:e.jsx(S,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900 leading-tight",children:l.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:["DOB: ",l.age||"N/A",typeof l.mobilityFlag=="boolean"&&" • Mobility: ".concat(l.mobilityFlag?"Yes":"No"),typeof l.medicalFlag=="boolean"&&" • Medical: ".concat(l.medicalFlag?"Yes":"No")," • Account Invite: ".concat(l.loginEnabled?"Enabled":"Not enabled"),l.loginEnabled&&l.loginPhone&&" • ".concat(l.loginPhone),l.needs&&" • ".concat(l.needs)]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>F(l),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",children:e.jsx(B,{size:16})}),e.jsx("button",{onClick:()=>E(l.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(H,{size:16})})]})]},l.id))}):e.jsx("div",{className:"text-center p-4 bg-slate-50 rounded-xl border border-dashed border-slate-300 text-slate-500 text-sm",children:"No household members added yet."}),e.jsxs(h,{variant:"outline",fullWidth:!0,onClick:M,className:"border-dashed border-slate-300 text-slate-600 hover:border-brand-400 hover:text-brand-600",children:[e.jsx(z,{size:18,className:"mr-2"})," Add Member"]})]})};export{T as H};
