System.register(["./index-legacy-BC6n9_Fz.js","./translations-legacy-DOH-4GSU.js","./inventoryStatus-legacy-CxjfWrqf.js","./arrow-left-legacy-BfJ5XQeX.js","./truck-legacy-BDfZ0TYX.js","./map-pin-legacy-BaIHUmhS.js","./navigation-legacy-Dph2ri7c.js"],function(e,t){"use strict";var s,n,r,a,l,i,d,o,c;return{setters:[e=>{s=e.r,n=e.S,r=e.j},e=>{a=e.t},e=>{l=e.g},e=>{i=e.A},e=>{d=e.T},e=>{o=e.M},e=>{c=e.N}],execute:function(){e("LogisticsView",({setView:e})=>{const[t,x]=s.useState(null),[m,b]=s.useState({water:0,food:0,blankets:0,medicalKits:0}),[g,h]=s.useState(0);s.useEffect(()=>{const e=n.getProfile().communityId||"CH-9921",t=n.getOrganization(e);x(t),b(n.getOrgInventory(e)),h(n.getOrgMembers(e).length),n.fetchOrgInventoryRemote(e).then(({inventory:e})=>{b(e)}),n.fetchOrgMembersRemote(e).then(({members:e})=>{h(e.length)});const s=()=>{b(n.getOrgInventory(e)),h(n.getOrgMembers(e).length)};return window.addEventListener("inventory-update",s),window.addEventListener("storage",s),()=>{window.removeEventListener("inventory-update",s),window.removeEventListener("storage",s)}},[]);const p=g||(null==t?void 0:t.registeredPopulation)||0,u=l(m,p);return r.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col pb-safe animate-fade-in",children:[r.jsx("div",{className:"bg-white border-b border-slate-200 p-4 sticky top-0 z-20",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>e("DASHBOARD"),className:"p-2 -ml-2 text-slate-500 hover:text-slate-800",children:r.jsx(i,{size:24})}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-lg text-slate-900",children:a("logistics.title")}),r.jsx("p",{className:"text-xs text-slate-500",children:a("logistics.subtitle")})]})]})}),r.jsx("div",{className:"p-6 space-y-6",children:r.jsx("div",{className:"bg-brand-50 border border-brand-100 p-4 rounded-xl shadow-sm",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-3 bg-brand-100 rounded-lg text-brand-700",children:r.jsx(d,{size:24})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-brand-900",children:a("logistics.depot")}),t?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-lg font-bold text-brand-800 leading-tight mt-1",children:t.name}),r.jsxs("div",{className:"flex items-start gap-1.5 mt-2 text-brand-700",children:[r.jsx(o,{size:16,className:"mt-0.5 shrink-0"}),r.jsx("p",{className:"text-sm font-medium",children:t.address})]}),r.jsxs("button",{onClick:()=>{if(null!=t&&t.address){const e=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(t.address)}`;window.open(e,"_blank")}},className:"mt-3 flex items-center gap-1 text-xs font-bold text-brand-700 bg-white/50 px-3 py-1.5 rounded border border-brand-200 hover:bg-white transition-colors",children:[r.jsx(c,{size:12})," Get Directions"]})]}):r.jsx("p",{className:"text-sm text-brand-700 animate-pulse mt-1",children:"Locating nearest hub..."}),r.jsxs("div",{className:"mt-4 pt-3 border-t border-brand-200/50",children:[r.jsx("p",{className:"text-[10px] uppercase font-bold text-brand-600 mb-2",children:"Current Stock Levels"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{label:"Water",key:"water",unit:"cases"},{label:"Food",key:"food",unit:"boxes"},{label:"Blankets",key:"blankets",unit:"units"},{label:"Med Kits",key:"medicalKits",unit:"kits"}].map(e=>{const t=u[e.key].level,s="HIGH"===t?"text-green-700 border-green-200 bg-green-50":"MEDIUM"===t?"text-amber-700 border-amber-200 bg-amber-50":"LOW"===t?"text-red-700 border-red-200 bg-red-50":"text-slate-500 border-slate-200 bg-white";return r.jsxs("div",{className:`text-xs px-3 py-2 rounded border font-bold shadow-sm ${s} flex justify-between`,children:[r.jsx("span",{children:e.label}),r.jsx("span",{children:"UNKNOWN"===t?"N/A":t})]},e.label)})})]})]})]})})})]})})}}});
