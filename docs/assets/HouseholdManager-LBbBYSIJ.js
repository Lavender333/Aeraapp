import{a as d,j as e,X as M,aj as E,a8 as Y,aC as D,aD as C,aE as w}from"./vendor-react-DZ0IVLBb.js";import{B as c}from"./Button-BzswROfv.js";import{I as g}from"./Input-D28zJcRZ.js";import{q as b,t as f,w as S}from"./index-Cbj0oizH.js";const I=({members:i,onChange:u})=>{const[p,n]=d.useState(!1),[x,t]=d.useState(null),[a,s]=d.useState({id:"",name:"",age:"",needs:"",mobilityFlag:void 0,medicalFlag:void 0,loginEnabled:!1}),v=()=>{s({id:Date.now().toString(),name:"",age:"",needs:"",mobilityFlag:void 0,medicalFlag:void 0,loginEnabled:!1}),t(null),n(!0)},j=l=>{s({...l,mobilityFlag:typeof l.mobilityFlag=="boolean"?l.mobilityFlag:void 0,medicalFlag:typeof l.medicalFlag=="boolean"?l.medicalFlag:void 0,loginEnabled:!!l.loginEnabled}),t(null),n(!0)},N=l=>{confirm("Remove this member?")&&u(i.filter(o=>o.id!==l))},y=()=>{const l=a.name.trim(),o=String(a.age||"").trim();if(!l){t("Name is required.");return}if(!b(o)||f(o)===null){t("Date of birth is required in MM/DD/YYYY format.");return}if(typeof a.mobilityFlag!="boolean"||typeof a.medicalFlag!="boolean"){t("Mobility and medical flags are required.");return}const m={...a,name:l,age:o,ageGroup:S(o)},h=i.findIndex(F=>F.id===a.id);let r=[...i];h>=0?r[h]=m:r.push(m),u(r),t(null),n(!1)};return p?e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 shadow-sm animate-fade-in",children:[e.jsxs("h4",{className:"font-bold text-slate-900 mb-3 flex items-center justify-between",children:[e.jsx("span",{children:i.some(l=>l.id===a.id)?"Edit Member":"Add Family Member"}),e.jsx("button",{onClick:()=>n(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(M,{size:20})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{label:"Name",placeholder:"e.g. Sarah Jones",value:a.name,onChange:l=>s({...a,name:l.target.value}),autoFocus:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(g,{label:"Date of Birth",placeholder:"MM/DD/YYYY",value:a.age,onChange:l=>s({...a,age:l.target.value}),error:a.age&&(!b(a.age)||f(a.age)===null)?"Use MM/DD/YYYY":void 0}),e.jsx(g,{label:"Medical/Needs",placeholder:"Optional",value:a.needs,onChange:l=>s({...a,needs:l.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Mobility Flag *"}),e.jsxs("select",{value:typeof a.mobilityFlag=="boolean"?String(a.mobilityFlag):"",onChange:l=>s({...a,mobilityFlag:l.target.value===""?void 0:l.target.value==="true"}),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all text-slate-900",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Medical Flag *"}),e.jsxs("select",{value:typeof a.medicalFlag=="boolean"?String(a.medicalFlag):"",onChange:l=>s({...a,medicalFlag:l.target.value===""?void 0:l.target.value==="true"}),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all text-slate-900",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})]})]}),e.jsxs("label",{className:"flex items-center justify-between rounded-lg border border-slate-200 p-3",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Enable member login (optional)"}),e.jsx("input",{type:"checkbox",checked:!!a.loginEnabled,onChange:l=>s({...a,loginEnabled:l.target.checked})})]}),x&&e.jsx("p",{className:"text-xs text-red-600 font-semibold",children:x}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(c,{variant:"ghost",fullWidth:!0,onClick:()=>{n(!1),t(null)},children:"Cancel"}),e.jsxs(c,{fullWidth:!0,onClick:y,children:[e.jsx(E,{size:16,className:"mr-2"})," Save Member"]})]})]})]}):e.jsxs("div",{className:"space-y-3",children:[i.length>0?e.jsx("div",{className:"grid gap-2",children:i.map(l=>e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-3 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500",children:e.jsx(Y,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900 leading-tight",children:l.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:["DOB: ",l.age||"N/A",typeof l.mobilityFlag=="boolean"&&` • Mobility: ${l.mobilityFlag?"Yes":"No"}`,typeof l.medicalFlag=="boolean"&&` • Medical: ${l.medicalFlag?"Yes":"No"}`,` • Login: ${l.loginEnabled?"Enabled":"Not enabled"}`,l.needs&&` • ${l.needs}`]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>j(l),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",children:e.jsx(D,{size:16})}),e.jsx("button",{onClick:()=>N(l.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(C,{size:16})})]})]},l.id))}):e.jsx("div",{className:"text-center p-4 bg-slate-50 rounded-xl border border-dashed border-slate-300 text-slate-500 text-sm",children:"No household members added yet."}),e.jsxs(c,{variant:"outline",fullWidth:!0,onClick:v,className:"border-dashed border-slate-300 text-slate-600 hover:border-brand-400 hover:text-brand-600",children:[e.jsx(w,{size:18,className:"mr-2"})," Add Member"]})]})};export{I as H};
