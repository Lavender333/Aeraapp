System.register(["./index-legacy-BC6n9_Fz.js","./Button-legacy-TMRSLogx.js","./Input-legacy-CRMIvJst.js","./lock-legacy-DAAs0KgB.js","./octagon-alert-legacy-DH_YHb_M.js","./circle-check-big-legacy-23eE6yZJ.js"],function(e,s){"use strict";var a,t,r,l,n,o,d,i;return{setters:[e=>{a=e.r,t=e.j,r=e.C},e=>{l=e.B},e=>{n=e.I},e=>{o=e.L},e=>{d=e.O},e=>{i=e.C}],execute:function(){e("ResetPasswordView",({setView:e})=>{const[s,c]=a.useState(""),[u,h]=a.useState(""),[m,x]=a.useState(""),[w,g]=a.useState(""),[f,b]=a.useState(!1),[j,p]=a.useState(!1),[v,y]=a.useState(!1);return a.useEffect(()=>{let e=!0;return(async()=>{const s=window.location.hash||"",a=window.location.search||"",t=new URLSearchParams(s.startsWith("#")?s.slice(1):s),l=new URLSearchParams(a.startsWith("?")?a.slice(1):a),n=t.get("access_token")||l.get("access_token"),o=t.get("refresh_token")||l.get("refresh_token"),d=l.get("code");d?await r.auth.exchangeCodeForSession(d):n&&o&&await r.auth.setSession({access_token:n,refresh_token:o});const{data:i,error:c}=await r.auth.getSession();if(!e)return;if(c)return x("Unable to validate reset link. Please request a new one."),b(!0),void y(!1);const u=null==i?void 0:i.session;y(!!u),b(!0),u||x("Reset link is invalid or expired. Please request a new one.")})(),()=>{e=!1}},[]),t.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col p-6 animate-fade-in pb-safe justify-center max-w-sm mx-auto w-full",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"w-16 h-16 bg-brand-100 rounded-full flex items-center justify-center mx-auto mb-4 text-brand-700 border border-brand-200",children:t.jsx(o,{size:32})}),t.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Reset Password"}),t.jsx("p",{className:"text-slate-600 font-medium",children:"Set a new password for your account."})]}),t.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[t.jsx(n,{disabled:!f||!v||j,label:"New Password",type:"password",placeholder:"New password",value:s,onChange:e=>c(e.target.value),className:"border-slate-300"}),t.jsx(n,{label:"Confirm Password",type:"password",placeholder:"Confirm password",value:u,onChange:e=>h(e.target.value),className:"border-slate-300"}),m&&t.jsxs("div",{className:"flex items-start gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:[t.jsx(d,{size:16,className:"mt-0.5 shrink-0"}),t.jsx("span",{children:m})]}),w&&t.jsxs("div",{className:"flex items-start gap-2 text-sm text-emerald-700 bg-emerald-50 p-3 rounded-lg",children:[t.jsx(i,{size:16,className:"mt-0.5 shrink-0"}),t.jsx("span",{children:w})]}),t.jsx(l,{fullWidth:!0,size:"lg",onClick:async()=>{if(x(""),g(""),!s||s.length<8)x("Password must be at least 8 characters.");else if(s===u)try{p(!0);const{error:e}=await r.auth.updateUser({password:s});if(e)throw e;g("Password updated. You can log in now."),c(""),h("")}catch(e){x((null==e?void 0:e.message)||"Password reset failed.")}finally{p(!1)}else x("Passwords do not match.")},className:"font-bold shadow-md",disabled:!f||j,children:j?"Savingâ€¦":"Update Password"}),t.jsx(l,{fullWidth:!0,variant:"outline",onClick:()=>e("LOGIN"),className:"border-slate-300 text-slate-900 font-bold",children:"Back to Login"})]})]})})}}});
