import{a,j as e,A as Ce,X as ke,g as Ze,U as Se,T as Ve,W as es,h as ss,i as ts,D as Ie,k as Re,B as as,l as ns,m as se,n as ls,o as te,p as rs,q as is,t as Ae,E as os,u as cs,v as ds,M as xs,w as ms,N as hs,x as us}from"./vendor-react-DZ0IVLBb.js";import{C as u}from"./Card-Ct5MaHk4.js";import{S as l,g as ps,a as gs}from"./index-Cbj0oizH.js";import{g as bs}from"./inventoryStatus-BGlXoNrp.js";import{t as p}from"./translations-gvebLRaU.js";import{B as f}from"./Button-BzswROfv.js";import{I as Oe}from"./Input-D28zJcRZ.js";import{R as fs,L as js,C as Ns,X as vs,Y as ys,T as ws,a as Cs,b as ae,c as ks}from"./vendor-charts-CIj2E38x.js";import"./vendor-CCVjAPEY.js";import"./vendor-maps-S3fC-LOA.js";import"./vendor-jspdf-Bd23t5aa.js";import"./vendor-supabase-ChvUvA8t.js";const Bs=({setView:x})=>{const ne=s=>{const n=String(s||"GENERAL_USER").toUpperCase();return["ADMIN","CONTRACTOR","LOCAL_AUTHORITY","FIRST_RESPONDER","GENERAL_USER","INSTITUTION_ADMIN","STATE_ADMIN","COUNTY_ADMIN","ORG_ADMIN","MEMBER"].includes(n)?n:"GENERAL_USER"},[Ss,B]=a.useState(null),[Te,le]=a.useState(navigator.onLine),[re,ie]=a.useState(!1),[$,oe]=a.useState(0),[r,ce]=a.useState("GENERAL_USER"),[G,Ee]=a.useState(""),[g,v]=a.useState(null),[O,y]=a.useState(null),[K,w]=a.useState(0),[h,C]=a.useState(null),[H,k]=a.useState(0),[W,S]=a.useState([]),[de,T]=a.useState(""),[Me,Y]=a.useState(!1),[De,Is]=a.useState("tier2"),[E,Ue]=a.useState("high"),[xe,Pe]=a.useState(2),[me,Le]=a.useState(3e3),[ze,q]=a.useState(!1),[_e,Fe]=a.useState(!1),[X,M]=a.useState(""),[D,I]=a.useState(null),[U,J]=a.useState(!1),R=!!g,[he,Q]=a.useState(void 0),[Be,P]=a.useState(!1);a.useEffect(()=>{const s=l.getProfile();if(ce(ne(s.role)),Ee(s.fullName),Q(s.pendingStatusRequest),M(s.communityId||""),s.communityId){const t=l.getOrganization(s.communityId);v((t==null?void 0:t.name)||s.communityId),y(t||null),w((t==null?void 0:t.registeredPopulation)||0),l.fetchOrgMembersRemote(s.communityId).then(({members:o})=>{k(o.length),S(o)}),l.fetchOrgInventoryRemote(s.communityId).then(({inventory:o,fromCache:N})=>{C(o),q(N)})}l.getActiveRequest().then(B),T(l.getTicker(s));const n=()=>{le(!0),ie(!0),l.syncPendingData().then(t=>{ie(!1),t>0&&(oe(t),setTimeout(()=>oe(0),4e3))})},m=()=>le(!1),c=()=>{const t=l.getProfile();if(ce(ne(t.role)),T(l.getTicker(t)),Q(t.pendingStatusRequest),l.getActiveRequest().then(B),t.communityId){const o=l.getOrganization(t.communityId);v((o==null?void 0:o.name)||t.communityId),y(o||null),w((o==null?void 0:o.registeredPopulation)||0),l.fetchOrgMembersRemote(t.communityId).then(({members:N})=>{k(N.length),S(N)}),l.fetchOrgInventoryRemote(t.communityId).then(({inventory:N,fromCache:Qe})=>{C(N),q(Qe)})}else v(null),y(null),w(0),C(null),k(0),S([])},i=()=>{const t=l.getProfile();T(l.getTicker(t))},b=()=>{sessionStorage.getItem("openFinanceOnLoad")&&(Y(!0),sessionStorage.removeItem("openFinanceOnLoad"))};if(b(),window.addEventListener("online",n),window.addEventListener("offline",m),window.addEventListener("storage",c),window.addEventListener("ticker-update",i),window.addEventListener("inventory-update",c),window.addEventListener("finance-open",b),s.communityId){const t=s.communityId;ps(t).then(o=>{o!=null&&o.message&&T(`[${g||t} Update] ${o.message}`)}).catch(()=>{})}return()=>{window.removeEventListener("online",n),window.removeEventListener("offline",m),window.removeEventListener("storage",c),window.removeEventListener("ticker-update",i),window.removeEventListener("inventory-update",c),window.removeEventListener("finance-open",b)}},[]);const ue=async()=>{const s=X.trim().replace(/[–—−]/g,"-").replace(/\s+/g,"").toUpperCase();if(!s){I("Enter a Community ID.");return}J(!0),I(null);try{const n=l.getOrganization(s),m=n?{orgCode:s,orgName:n.name}:await gs(s);if(!m){I("Community not found. Check the ID and try again.");return}const c=l.getProfile();l.saveProfile({...c,communityId:s}),v(m.orgName||s),y(n||null),w((n==null?void 0:n.registeredPopulation)||0);const[{members:i},{inventory:b,fromCache:t}]=await Promise.all([l.fetchOrgMembersRemote(s),l.fetchOrgInventoryRemote(s)]);k(i.length),S(i),C(b),q(t)}catch{I("Unable to connect right now. Please try again.")}finally{J(!1)}},$e=()=>{const s=l.getProfile();l.saveProfile({...s,communityId:""}),v(null),y(null),w(0),C(null),k(0),S([]),M(""),I(null),J(!1)},pe=s=>{l.respondToPing(s),Q(void 0),l.getActiveRequest().then(B)},ge=r==="FIRST_RESPONDER"||r==="LOCAL_AUTHORITY"||r==="ADMIN"||r==="STATE_ADMIN"||r==="COUNTY_ADMIN",Z=r==="INSTITUTION_ADMIN"||r==="ORG_ADMIN",be=Z||r==="ADMIN"||r==="STATE_ADMIN"||r==="COUNTY_ADMIN",fe=r==="CONTRACTOR",L=r==="GENERAL_USER",z=!L,Ge=r==="ADMIN"||r==="FIRST_RESPONDER"||r==="STATE_ADMIN"||r==="COUNTY_ADMIN",Ke=r==="FIRST_RESPONDER"||r==="LOCAL_AUTHORITY"||r==="STATE_ADMIN"||r==="COUNTY_ADMIN"||fe,je=W.filter(s=>s.status==="SAFE").length,He=W.filter(s=>s.status==="DANGER").length,We=je+He,V=W.length||H||K,Ne=V?Math.round(We/V*100):null,ve=V?je:null,ye=O!=null&&O.currentBroadcast?O.currentBroadcast.toLowerCase().includes("shelter")?1:0:null,d={tier1:{name:"MVP / Sandbox",targetUsers:300,activeUsers:150,costs:{low:[2500,3e3],medium:[3600,5300],high:[8500,9e3]},capacity:{total:"100–300",mau:"50–150",dau:"10–50",concurrent:"5–20"},grantRevenue:0},tier2:{name:"Neighborhood",targetUsers:15e3,activeUsers:3e3,costs:{low:[12800,13400],medium:[14800,23500],high:[33500,44e3]},capacity:{total:"5k–15k",mau:"1.5k–3k",dau:"500–1.2k",concurrent:"50–150"},grantRevenue:0},tier3:{name:"City-Level",targetUsers:25e4,activeUsers:2e4,costs:{low:[38500,4e4],medium:[44500,67500],high:[86e3,155e3]},capacity:{total:"50k–250k",mau:"10k–70k",dau:"3k–20k",concurrent:"400–2.5k"},grantRevenue:0}}[De],j=Math.round((d.costs[E][0]+d.costs[E][1])/2),Ye=j-d.grantRevenue,ee=me,_=xe,we=d.grantRevenue+ee*_,F=we-j,A=_>0?Math.max(0,Math.ceil(Ye/_)):null,qe=G?G.trim().charAt(0).toUpperCase():"A";Array.from({length:12}).map((s,n)=>{const m=n+1,c=Math.round(ee*Math.pow(1.1,n)),i=Math.round(d.targetUsers*(m/12));return{month:m,projected:c,target:i}});const Xe=Array.from({length:12}).map((s,n)=>{const m=n+1,c=Math.round(ee*Math.pow(1.1,n)),i=d.grantRevenue+c*_,b=i-j;return{month:m,revenue:i,cost:j,profit:b}}),Je=d.targetUsers>0&&A!==null?Math.min(100,Math.round(A/d.targetUsers*100)):null;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-indigo-50 animate-fade-in pb-28",children:e.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6 relative",children:[Be&&e.jsx("div",{className:"fixed inset-0 z-50 flex itemscenter justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>P(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-slide-up",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"bg-slate-900 p-4 flex justify-between items-center text-white border-b border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"text-brand-400",size:20}),e.jsx("h3",{className:"font-bold text-lg",children:"Active Broadcast"})]}),e.jsx("button",{onClick:()=>P(!1),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(ke,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 mb-6",children:e.jsx("p",{className:"text-slate-900 text-lg font-medium leading-relaxed whitespace-pre-wrap",children:de})}),e.jsx(f,{fullWidth:!0,onClick:()=>P(!1),className:"bg-slate-900 hover:bg-slate-800 text-white font-bold",children:"Close Message"})]})]})}),Me&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>Y(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl overflow-hidden animate-slide-up",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"bg-slate-900 text-white p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{size:18}),e.jsx("div",{children:e.jsx("h3",{className:"font-bold",children:"AERA Financial Intelligence Dashboard"})})]}),e.jsx("button",{onClick:()=>Y(!1),className:"text-slate-400 hover:text-white",children:e.jsx(ke,{size:22})})]}),e.jsxs("div",{className:"p-6 space-y-4 bg-gradient-to-br from-slate-50 to-blue-50 max-h-[75vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase font-bold text-slate-500",children:"Current Tier"}),e.jsx("p",{className:"text-xl font-bold text-slate-900",children:d.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Scenario: ",E.toUpperCase()," • $",j.toLocaleString(),"/mo"]}),e.jsx("p",{className:"text-[11px] text-slate-500",children:"Quick snapshot: set users and price; see burn, break-even, and conversion needed."})]}),e.jsx("div",{className:"bg-slate-900 text-slate-100 px-4 py-2 rounded-lg font-semibold text-xs shadow-sm",children:"Financial snapshot"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-xs uppercase font-bold text-slate-500",children:"Scenario"}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[["high","medium","low"].map(s=>e.jsx("button",{onClick:()=>Ue(s),className:`px-3 py-2 rounded-lg text-xs font-bold border uppercase tracking-wide ${E===s?"bg-emerald-600 text-white border-emerald-600":"bg-white border-slate-200 text-slate-700 hover:border-emerald-300"}`,children:s==="high"?"High Operational Cost":s==="medium"?"Medium Operational Cost":"Low Operational Cost"},s)),e.jsx("button",{onClick:()=>Fe(s=>!s),className:"ml-3 text-sm text-slate-600 underline",children:"Operational Cost Definition"})]})]}),_e&&e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow border border-slate-200 mt-3 text-sm",children:[e.jsx("h5",{className:"font-bold mb-2",children:"Operational Cost Definition"}),e.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[e.jsx("li",{children:"Hosting & compute: VMs/containers, serverless runtime, autoscaling instances."}),e.jsx("li",{children:"Databases & storage: primary DB, object storage, backups."}),e.jsx("li",{children:"Network & CDN: bandwidth, egress, load balancers, CDN caching."}),e.jsx("li",{children:"Monitoring & logging: observability tooling, retention, alerting."}),e.jsx("li",{children:"Backups & disaster recovery: snapshot storage, multi‑region replication."}),e.jsx("li",{children:"Security & compliance: WAF, vulnerability scanning, audits, certs."}),e.jsx("li",{children:"Support & operations: SRE/DevOps on‑call, incident response, runbook time."}),e.jsx("li",{children:"Third‑party services & licenses: maps, SMS/email gateways, analytics, paid APIs."}),e.jsx("li",{children:"Integrations & data pipelines: ETL, message queues, 3rd‑party connectors."}),e.jsx("li",{children:"Capacity buffer / redundancy: spare capacity, concurrent/peak provisioning."})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("h6",{className:"font-semibold mb-2",children:["What each scenario supports (current tier: ",d.name,")"]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:["low","medium","high"].map(s=>e.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50",children:[e.jsx("p",{className:"font-bold uppercase text-xs mb-1",children:s}),e.jsxs("p",{className:"text-xs",children:["Cost range: $",d.costs[s][0].toLocaleString()," — $",d.costs[s][1].toLocaleString()]}),e.jsxs("p",{className:"text-xs mt-1",children:["Capacity (approx): ",d.capacity.total]}),e.jsxs("p",{className:"text-xs",children:["MAU: ",d.capacity.mau]})]},s))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow border border-slate-200 space-y-3",children:[e.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Se,{size:16,className:"text-blue-600"})," Snapshot"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[e.jsxs("label",{className:"text-xs font-semibold text-slate-600 flex flex-col gap-1",children:["Price per user (monthly)",e.jsx("input",{type:"number",value:xe,onChange:s=>Pe(Math.max(0,Number(s.target.value)||0)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),e.jsxs("label",{className:"text-xs font-semibold text-slate-600 flex flex-col gap-1",children:["Active users",e.jsx("input",{type:"number",value:me,onChange:s=>Le(Math.max(0,Number(s.target.value)||0)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-5 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-[11px] uppercase font-bold text-slate-500",children:"Cost"}),e.jsxs("p",{className:"text-lg font-bold text-slate-900",children:["$",j.toLocaleString()]})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-[11px] uppercase font-bold text-slate-500",children:"Revenue"}),e.jsxs("p",{className:"text-lg font-bold text-slate-900",children:["$",we.toLocaleString()]})]}),e.jsxs("div",{className:`rounded-lg p-3 border ${F>=0?"bg-emerald-50 border-emerald-200":"bg-orange-50 border-orange-200"}`,children:[e.jsx("p",{className:"text-[11px] uppercase font-bold text-slate-500",children:"Burn / Profit"}),e.jsxs("p",{className:`text-lg font-bold ${F>=0?"text-emerald-700":"text-orange-700"}`,children:[F>=0?"+":"-","$",Math.abs(F).toLocaleString()]})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-[11px] uppercase font-bold text-slate-500",children:"Break-even users"}),e.jsx("p",{className:"text-lg font-bold text-slate-900",children:(A==null?void 0:A.toLocaleString())??"N/A"})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-[11px] uppercase font-bold text-slate-500",children:"Conversion needed"}),e.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[Je??"N/A","%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow border border-slate-200",children:[e.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2 mb-2",children:[e.jsx(Ve,{size:16,className:"text-emerald-600"})," Revenue, Cost & Profit (12 Months)"]}),e.jsx("div",{className:"h-64",children:e.jsx(fs,{width:"100%",height:"100%",children:e.jsxs(js,{data:Xe,children:[e.jsx(Ns,{strokeDasharray:"3 3"}),e.jsx(vs,{dataKey:"month"}),e.jsx(ys,{}),e.jsx(ws,{formatter:s=>`$${Number(s).toLocaleString()}`}),e.jsx(Cs,{}),e.jsx(ae,{type:"monotone",dataKey:"revenue",stroke:"#2563eb",strokeWidth:3,name:"Revenue",dot:!1}),e.jsx(ae,{type:"monotone",dataKey:"cost",stroke:"#f59e0b",strokeWidth:2,name:"Cost",dot:!1}),e.jsx(ae,{type:"monotone",dataKey:"profit",stroke:"#10b981",strokeWidth:2,name:"Profit",dot:!1}),e.jsx(ks,{y:0,stroke:"#94a3b8"})]})})})]}),e.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4 text-sm text-slate-700",children:"Keep it simple: set users and price; read burn, break-even, and conversion. Use scenarios only to reflect cost side (low/med/high)."})]})]})}),!Te&&e.jsxs("div",{className:"bg-slate-800 text-white px-4 py-3 rounded-lg flex items-center justify-center gap-2 text-sm font-bold shadow-lg animate-pulse",children:[e.jsx(es,{size:16}),e.jsx("span",{children:p("dash.offline")})]}),re&&e.jsxs("div",{className:"bg-blue-600 text-white px-4 py-3 rounded-lg flex items-center justify-center gap-2 text-sm font-bold shadow-lg",children:[e.jsx(ss,{size:16,className:"animate-spin"}),e.jsx("span",{children:"Syncing with Command Center..."})]}),$>0&&!re&&e.jsxs("div",{className:"bg-green-600 text-white px-4 py-3 rounded-lg flex items-center justify-center gap-2 text-sm font-bold shadow-lg animate-fade-in",children:[e.jsx(ts,{size:16}),e.jsxs("span",{children:["Successfully synced ",$," item",$>1?"s":"","."]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-1",children:p("dash.welcome")}),e.jsx("p",{className:"text-lg text-slate-500",children:G.split(" ")[0]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{onClick:()=>x("SETTINGS"),className:"w-14 h-14 rounded-full bg-gradient-to-br from-teal-400 to-cyan-500 flex items-center justify-center text-white text-xl font-semibold shadow-md cursor-pointer",children:qe})})]}),be&&g&&(()=>{const s=!!h,n=h||{water:0,food:0,blankets:0,medicalKits:0},c=s?bs(n,H||K):{water:{level:"UNKNOWN"},food:{level:"UNKNOWN"},blankets:{level:"UNKNOWN"},medicalKits:{level:"UNKNOWN"}};return e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-100 rounded-2xl p-6 shadow-md space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase font-bold text-emerald-700",children:"Hub Inventory"}),e.jsx("p",{className:"text-base font-bold text-slate-900",children:g}),e.jsxs("p",{className:"text-[11px] text-slate-500 font-bold",children:["Members: ",H||K]}),ze&&e.jsx("p",{className:"text-[11px] text-amber-600 font-semibold",children:"Using cached inventory (API unavailable)."})]}),e.jsx(f,{size:"sm",variant:"outline",onClick:()=>x("ORG_DASHBOARD"),children:"Manage"})]}),!h&&e.jsx("p",{className:"text-[11px] text-slate-500 font-semibold",children:"Inventory is loading or unavailable. You can still open Manage."}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Water Cases",value:n.water,unit:"cases",key:"water",icon:e.jsx(Ie,{size:16,className:"text-blue-600"})},{label:"Food Boxes",value:n.food,unit:"boxes",key:"food",icon:e.jsx(Re,{size:16,className:"text-emerald-600"})},{label:"Blankets",value:n.blankets,unit:"units",key:"blankets",icon:e.jsx(as,{size:16,className:"text-amber-600"})},{label:"Med Kits",value:n.medicalKits,unit:"kits",key:"medicalKits",icon:e.jsx(ns,{size:16,className:"text-red-600"})}].map(i=>e.jsxs("div",{className:"bg-white border border-emerald-100 rounded-xl p-3 shadow-sm flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-50 rounded-lg",children:i.icon}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-[11px] uppercase font-bold text-slate-500",children:i.label}),e.jsx("p",{className:"text-2xl font-black text-slate-900 leading-tight",children:s?i.value:"—"}),e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-slate-400",children:[e.jsx("span",{children:i.unit}),e.jsx("span",{className:`font-bold ${c[i.key].level==="HIGH"?"text-green-600":c[i.key].level==="MEDIUM"?"text-amber-600":c[i.key].level==="LOW"?"text-red-600":"text-slate-400"}`,children:c[i.key].level==="UNKNOWN"?"N/A":c[i.key].level})]})]})]},i.label))})]})})(),R&&z&&e.jsxs("div",{onClick:()=>P(!0),className:"bg-slate-900 text-white p-3 rounded-lg flex items-center gap-3 text-sm shadow-md overflow-hidden cursor-pointer group hover:bg-slate-800 transition-colors",title:"Tap to read full message",children:[e.jsx(Ce,{size:16,className:"text-brand-400 animate-pulse shrink-0"}),e.jsx("div",{className:"flex-1 overflow-hidden whitespace-nowrap relative",children:e.jsx("span",{className:"inline-block animate-[slideLeft_20s_linear_infinite]",children:de})}),e.jsx(se,{size:16,className:"text-slate-500 group-hover:text-white shrink-0"})]}),he&&e.jsxs("div",{className:"bg-purple-600 text-white p-5 rounded-2xl shadow-xl shadow-purple-200 animate-slide-up border-2 border-purple-400",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-full animate-bounce",children:e.jsx(ls,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg leading-tight",children:"Status Check Requested"}),e.jsxs("p",{className:"text-purple-200 text-sm",children:["By ",he.requesterName]})]})]}),e.jsx("p",{className:"mb-4 font-medium",children:"Are you safe right now?"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(f,{onClick:()=>pe(!0),className:"bg-green-500 hover:bg-green-400 text-white border-0 font-bold",children:"I Am Safe"}),e.jsx(f,{onClick:()=>pe(!1),className:"bg-red-500 hover:bg-red-400 text-white border-0 font-bold",children:"I Need Help"})]})]}),R&&z&&e.jsxs(u,{title:"Community Connection",icon:e.jsx(te,{size:20}),className:"border-l-4 border-l-brand-500",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Connected to ",e.jsx("span",{className:"font-semibold text-slate-900",children:g}),". Update the Community ID to reconnect."]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(Oe,{placeholder:"Community ID (e.g., CH-1234)",value:X,onChange:s=>M(s.target.value)}),D&&e.jsx("p",{className:"text-xs text-red-600 font-semibold",children:D}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(f,{size:"sm",onClick:ue,disabled:U,children:U?"Updating...":"Update Community"}),e.jsx(f,{size:"sm",variant:"outline",onClick:$e,children:"Disconnect"})]})]})]}),!R&&z&&e.jsxs(u,{title:"Trusted Community Connection",icon:e.jsx(te,{size:20}),className:"border-l-4 border-l-brand-500",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Enter your Community ID to unlock local alerts, depots, and inventory updates."}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(Oe,{placeholder:"Community ID (e.g., CH-1234)",value:X,onChange:s=>M(s.target.value)}),D&&e.jsx("p",{className:"text-xs text-red-600 font-semibold",children:D}),e.jsx("div",{className:"flex gap-2",children:e.jsx(f,{size:"sm",onClick:ue,disabled:U,children:U?"Connecting...":"Connect Community"})})]})]}),L&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wider",children:"Home & Safety"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Your readiness, household, and emergency settings in one place"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[e.jsxs("button",{type:"button",onClick:()=>x("READINESS"),className:"text-left bg-white border border-slate-200 rounded-xl p-4 shadow-sm hover:border-slate-300 hover:shadow-md transition-all",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 text-slate-600 flex items-center justify-center mb-3",children:e.jsx(rs,{size:18})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h4",{className:"font-semibold text-slate-900 text-sm",children:"Readiness Checklist"})}),e.jsx("p",{className:"text-[11px] text-slate-500 mt-2",children:"Build and track your kit with quantity guidance."})]}),e.jsxs("button",{type:"button",onClick:()=>x("SETTINGS"),className:"text-left bg-white border border-slate-200 rounded-xl p-4 shadow-sm hover:border-slate-300 hover:shadow-md transition-all",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 text-slate-600 flex items-center justify-center mb-3",children:e.jsx(is,{size:18})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h4",{className:"font-semibold text-slate-900 text-sm",children:"Home & Profile"})}),e.jsx("p",{className:"text-[11px] text-slate-500 mt-2",children:"Household members, emergency contacts, and org connection."})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wider",children:"National Preparedness"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Official resources to help you stay ready"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[e.jsxs("a",{href:"https://www.ready.gov/",target:"_blank",rel:"noreferrer",className:"bg-white border border-slate-200 rounded-xl p-4 shadow-sm hover:border-slate-300 hover:shadow-md transition-all",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 text-slate-600 flex items-center justify-center mb-3",children:e.jsx(Ae,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 text-sm",children:"FEMA Safety Guides"}),e.jsx(os,{size:12,className:"text-slate-400"})]}),e.jsx("p",{className:"text-[11px] text-slate-500 mt-2",children:"Official how-to guides for floods, fires, and outages."}),e.jsx("div",{className:"inline-flex items-center gap-1 text-[11px] font-semibold text-slate-600 mt-3",children:"Explore Guides"})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 shadow-sm",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 text-slate-600 flex items-center justify-center mb-3",children:e.jsx(Ae,{size:18})}),e.jsx("h4",{className:"font-semibold text-slate-900 text-sm",children:"Community Resources"}),e.jsx("p",{className:"text-[11px] text-slate-500 mt-2",children:"Join or update your community connection in Settings."}),e.jsx("button",{type:"button",onClick:()=>x("SETTINGS"),className:"inline-flex items-center gap-1 text-[11px] font-semibold text-brand-600 mt-3 hover:underline",children:"Open Settings"})]})]})]})]}),R&&r!=="ADMIN"&&!Z&&!(be&&g&&h)&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 flex items-start gap-3 shadow-sm cursor-pointer hover:bg-amber-100 transition-colors",onClick:()=>x("LOGISTICS"),children:[e.jsx("div",{className:"p-2 bg-amber-200 rounded-full text-amber-800",children:e.jsx(te,{size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-amber-900 text-sm",children:p("dash.resource_depot")}),e.jsx("p",{className:"text-xs text-amber-800",children:h?`${g} hub inventory — Water ${h.water}, Food ${h.food}, Blankets ${h.blankets}, Med Kits ${h.medicalKits}.`:`${g} hub inventory is not available yet.`})]}),e.jsx(se,{size:16,className:"text-amber-500 mt-2"})]})}),R&&z&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wider mt-2",children:"Recovery & Resources"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[(L||Z)&&e.jsx(u,{className:"col-span-1 hover:border-brand-300",onClick:()=>x("GAP"),children:e.jsxs("div",{className:"flex flex-col items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg text-green-700",children:e.jsx(cs,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:p("dash.gap")}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:p("dash.gap.desc")})]})]})}),(L||ge||fe)&&e.jsx(u,{className:"col-span-1 hover:border-brand-300",onClick:()=>x("ASSESSMENT"),children:e.jsxs("div",{className:"flex flex-col items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg text-purple-700",children:e.jsx(ds,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:p("dash.assess")}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:p("dash.assess.desc")})]})]})}),Ke&&e.jsx(u,{className:"col-span-2 bg-gradient-to-br from-emerald-50 to-teal-50 border-emerald-100 hover:border-emerald-200",onClick:()=>x("LOGISTICS"),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-white rounded-xl shadow-sm",children:e.jsx(xs,{size:24,className:"text-emerald-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:p("dash.logistics")}),e.jsx("p",{className:"text-sm text-slate-600",children:p("dash.logistics.desc")}),e.jsxs("div",{className:"flex items-center gap-3 mt-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg px-3 py-2 shadow-sm",children:[e.jsx(Ie,{size:16,className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Water"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg px-3 py-2 shadow-sm",children:[e.jsx(Re,{size:16,className:"text-emerald-600"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Food"})]})]})]}),e.jsx(se,{className:"w-5 h-5 text-emerald-400 group-hover:translate-x-1 transition-transform flex-shrink-0"})]})}),ge&&e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"col-span-1 hover:border-brand-300 border-indigo-200 bg-indigo-50/50",onClick:()=>x("POPULATION"),children:e.jsxs("div",{className:"flex flex-col items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg text-indigo-700",children:e.jsx(Se,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Population"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Evac zones & heatmaps"})]})]})}),e.jsx(u,{className:"col-span-1 hover:border-brand-300 border-orange-200 bg-orange-50/50",onClick:()=>x("RECOVERY"),children:e.jsxs("div",{className:"flex flex-col items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg text-orange-700",children:e.jsx(ms,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Recovery"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Teams & Deployments"})]})]})}),e.jsx(u,{className:"col-span-1 hover:border-brand-300 border-slate-300 bg-slate-100",onClick:()=>x("DRONE"),children:e.jsxs("div",{className:"flex flex-col items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-800 rounded-lg text-brand-400",children:e.jsx(hs,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Drone Dispatch"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"UAV Feed & Delivery"})]})]})})]})]})]}),Ge&&e.jsx(u,{title:"Community Status (Pro)",icon:e.jsx(us,{size:20}),className:"bg-slate-800 text-slate-100 border-slate-700",children:e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center divide-x divide-slate-700",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-brand-400",children:Ne===null?"N/A":`${Ne}%`}),e.jsx("div",{className:"text-[10px] text-slate-400",children:"Evacuated"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-blue-400",children:ve===null?"N/A":ve}),e.jsx("div",{className:"text-[10px] text-slate-400",children:"Rescued"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-green-400",children:ye===null?"N/A":ye}),e.jsx("div",{className:"text-[10px] text-slate-400",children:"Shelters Open"})]})]})})]})})};export{Bs as DashboardView};
