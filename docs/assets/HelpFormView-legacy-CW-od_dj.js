System.register(["./index-legacy-BC6n9_Fz.js","./TileLayer-legacy-q1JI4m5W.js","./Button-legacy-TMRSLogx.js","./Input-legacy-CRMIvJst.js","./translations-legacy-DOH-4GSU.js","./clock-legacy-BTfLGWFm.js","./circle-check-big-legacy-23eE6yZJ.js","./refresh-cw-legacy-DmgC11Q3.js","./message-square-legacy-d2n1H9fH.js","./arrow-left-legacy-BfJ5XQeX.js","./x-legacy-D0EAXDA5.js","./globe-legacy-rEOerVk_.js","./map-pin-legacy-BaIHUmhS.js","./triangle-alert-legacy-ziETUq3k.js","./droplets-legacy-Dh8Pruzf.js","./shield-legacy-BwS6rKl-.js","./zap-legacy-CqMGFitJ.js","./index-legacy-lN1ZHHK3.js"],function(e,t){"use strict";var s,l,a,n,i,r,o,c,d,x,u,m,b,g,h,p,f,j,N,y,v,w,k,A,S,z,C,M,E;return{setters:[e=>{s=e.c,l=e.r,a=e.j,n=e.S,i=e.n},e=>{r=e.u,o=e.c,c=e.l,d=e.a,x=e.e,u=e.M,m=e.T,b=e.L},e=>{g=e.B},e=>{h=e.I,p=e.T},e=>{f=e.t},e=>{j=e.C},e=>{N=e.C},e=>{y=e.R},e=>{v=e.M},e=>{w=e.A},e=>{k=e.X},e=>{A=e.G},e=>{S=e.M},e=>{z=e.T},e=>{C=e.D},e=>{M=e.S},e=>{E=e.Z},null],execute:function(){
/**
       * @license lucide-react v0.556.0 - ISC
       *
       * This source code is licensed under the ISC license.
       * See the LICENSE file in the root directory of this source tree.
       */
const t=s("ambulance",[["path",{d:"M10 10H6",key:"1bsnug"}],["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.578-.502l-1.539-3.076A1 1 0 0 0 16.382 8H14",key:"lrkjwd"}],["path",{d:"M8 8v4",key:"1fwk8c"}],["path",{d:"M9 18h6",key:"x1upvd"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),L=s("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]),B=s("locate-fixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),D=s("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);function I(e){const t=r().map;return l.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const O=o(function({position:e,...t},s){const l=new c.Marker(e,t);return d(l,x(s,{overlayContainer:l}))},function(e,t,s){t.position!==s.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==s.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==s.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==s.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==s.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),T=({current:e,total:t})=>{const s=Math.min(100,Math.max(0,e/t*100));return a.jsxs("div",{className:"w-full",children:[a.jsxs("div",{className:"flex justify-between text-xs font-semibold uppercase text-slate-500 mb-2",children:[a.jsxs("span",{children:["Step ",e," of ",t]}),a.jsxs("span",{children:[Math.round(s),"%"]})]}),a.jsx("div",{className:"h-2 w-full bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-brand-500 transition-all duration-500 ease-out rounded-full",style:{width:`${s}%`}})})]})};delete b.Icon.Default.prototype._getIconUrl,b.Icon.Default.mergeOptions({iconRetinaUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcY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",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",shadowUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"});const R=({marker:e,onPick:t})=>(I({click:e=>{t({lat:e.latlng.lat,lng:e.latlng.lng})}}),e?a.jsx(O,{position:[e.lat,e.lng]}):null),P={isSafe:null,location:"",emergencyType:"",isInjured:null,injuryDetails:"",situationDescription:"",canEvacuate:null,hazardsPresent:null,hazardDetails:"",peopleCount:1,petsPresent:null,hasWater:null,hasFood:null,hasMeds:null,hasPower:null,hasPhone:null,needsTransport:null,vulnerableGroups:[],medicalConditions:"",damageType:"",consentToShare:!0};e("HelpFormView",({setView:e})=>{const[s,r]=l.useState(1),[o,c]=l.useState(P),[d,x]=l.useState(!1),[b,I]=l.useState(!1),[O,U]=l.useState("idle"),[H,F]=l.useState(""),[J,q]=l.useState(null),[K,V]=l.useState(null),[Y,W]=l.useState(!1),[X,G]=l.useState(!0),[Q,Z]=l.useState(null),[$,_]=l.useState(""),[ee,te]=l.useState(!1),[se,le]=l.useState(!navigator.onLine),ae=l.useRef(!1),ne=l.useRef(null),ie=l.useRef(0),[re,oe]=l.useState(!1),[ce,de]=l.useState(null),xe=l.useRef(null),[ue,me]=l.useState(!1);l.useEffect(()=>{r(1),c(P),x(!1),I(!1),U("idle"),q(null),V(null),W(!1),G(!0),Z(null),_(""),te(!1),ae.current=!1,ne.current=null,ie.current=0},[]),l.useEffect(()=>{var e;const t=n.getProfile();F(t.emergencyContactPhone||""),null===(e=navigator.permissions)||void 0===e||e.query({name:"geolocation"}).then(e=>{"granted"===e.state&&G(!0)});const s=()=>le(!1),l=()=>le(!0);return window.addEventListener("online",s),window.addEventListener("offline",l),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",l)}},[]),l.useEffect(()=>{if(ae.current)return;const e=n.getLastKnownLocation();e&&(ae.current=!0,c(t=>t.location?t:{...t,location:e.location}),_(new Date(e.timestamp).toLocaleTimeString()),G(!1),te(!1))},[]);const be=e=>{const t=e.match(/^\s*(-?\d+(?:\.\d+)?)\s*,\s*(-?\d+(?:\.\d+)?)\s*$/);if(!t)return null;const s=Number(t[1]),l=Number(t[2]);return Number.isFinite(s)&&Number.isFinite(l)?Math.abs(s)>90||Math.abs(l)>180?null:{lat:s,lng:l}:null},ge=l.useMemo(()=>{const e=be(o.location||"");if(e)return e;const t=n.getLastKnownLocation();return(null!=t&&t.location?be(t.location):null)||{lat:37.7749,lng:-122.4194}},[o.location]);l.useEffect(()=>{if(!re)return;const e=be(o.location||"");e&&de(e)},[o.location,re]);const he=async()=>{te(!1),V("Location services unavailable. Please enter address manually.")};l.useEffect(()=>{let e;return X&&"geolocation"in navigator?(V(null),W(!1),te(!1),e=navigator.geolocation.watchPosition(e=>{const{latitude:t,longitude:s,accuracy:l}=e.coords,a=Date.now(),i=Number.isFinite(l)?Math.round(l):null,r=ne.current,o=null!==i&&(null===r||i<=r+5),d=a-ie.current>3e4;if(o||d){ne.current=null!=i?i:r,ie.current=a;const e=`${t.toFixed(6)}, ${s.toFixed(6)}`;c(t=>({...t,location:e})),Z(i),_((new Date).toLocaleTimeString()),V(null),W(!1),te(!1),J&&n.updateRequestLocation(J,e)}},e=>{let t="Location unavailable",s=!1;switch(e.code){case 1:t="GPS denied. Please enter address manually.",W(!0),he(),s=!0;break;case 2:t="Signal weak. Please enter address manually.",he(),s=!0;break;case 3:t="GPS Timeout. Retrying...";break;default:t="GPS Error"}ee||s||V(t),Z(null),s&&G(!1)},{enableHighAccuracy:!0,maximumAge:0,timeout:2e4})):X&&!("geolocation"in navigator)&&(V("GPS not supported. Using Network Location."),he(),G(!1)),()=>{e&&navigator.geolocation.clearWatch(e)}},[X,J]),l.useEffect(()=>()=>{if(ue){var e;const t=null===(e=xe.current)||void 0===e?void 0:e.srcObject;null==t||t.getTracks().forEach(e=>e.stop())}},[ue]);const pe=e=>{c(t=>({...t,...e}))},fe=()=>{const e=H.replace(/[^\d+]/g,""),t=null===o.isSafe?"Unknown Status":o.isSafe?"Safe":"IN DANGER",s=o.emergencyType||"Emergency",l=o.location||"GPS Unavailable",a=`I used the AERA app to request emergency assistance.\n\nType: ${s} ${o.situationDescription?`- ${o.situationDescription}`:""}\nLocation: ${l}\nStatus: ${t}`,n=navigator.userAgent.match(/iPhone|iPad|iPod/i)?"&":"?";window.location.href=`sms:${e}${n}body=${encodeURIComponent(a)}`};return b?a.jsxs("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center p-8 text-center animate-fade-in pb-safe",children:[a.jsxs("div",{className:"w-24 h-24 rounded-full flex items-center justify-center mb-6 relative "+(se?"bg-amber-100":"bg-green-100"),children:[a.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${se?"border-amber-500/30":"border-green-500/30"} animate-[ping_2s_ease-out_infinite]`}),se?a.jsx(j,{size:48,className:"text-amber-600 relative z-10"}):a.jsx(N,{size:48,className:"text-green-700 relative z-10"})]}),a.jsx("h2",{className:"text-3xl font-extrabold text-slate-900 mb-2",children:se?"Saved to Outbox":f("help.success_title")}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-900 px-4 py-3 rounded-xl text-sm font-bold mb-8 flex flex-col items-center gap-2 max-w-xs mx-auto animate-pulse",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(y,{size:18,className:"animate-spin"}),"Live Location Sharing Active"]}),a.jsx("span",{className:"font-mono text-xs bg-white/60 px-2 py-1 rounded text-blue-800 border border-blue-100",children:o.location||"Locating..."})]}),se&&a.jsx("p",{className:"text-slate-800 font-medium mb-8 max-w-sm",children:"Your report has been saved to your device. It will automatically upload to responders as soon as you connect to the internet."}),H&&!se&&"idle"!==O&&a.jsxs("div",{className:"text-sm font-bold px-4 py-3 rounded-xl border max-w-xs mx-auto "+("sent"===O?"bg-green-50 text-green-800 border-green-200":"failed"===O?"bg-amber-50 text-amber-800 border-amber-200":"bg-slate-50 text-slate-700 border-slate-200"),children:["sent"===O&&"Emergency contact notified via SMS.","failed"===O&&"Unable to notify emergency contact. You can continue.","sending"===O&&"Notifying emergency contact..."]}),a.jsxs("div",{className:"w-full space-y-4",children:[H&&a.jsxs(g,{fullWidth:!0,onClick:fe,className:"bg-slate-900 hover:bg-slate-800 text-white",children:[a.jsx(v,{className:"mr-2",size:20}),f("help.text_contact")]}),a.jsx(g,{fullWidth:!0,variant:"outline",onClick:()=>e("DASHBOARD"),className:"border-slate-300 text-slate-900 font-bold",children:f("help.return_dash")})]})]}):a.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col pb-safe",children:[a.jsxs("div",{className:"bg-white border-b border-slate-200 p-4 sticky top-0 z-20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("button",{onClick:()=>1===s?e("DASHBOARD"):r(e=>Math.max(e-1,1)),className:"p-2 -ml-2 text-slate-600 hover:text-slate-900",children:a.jsx(w,{size:24})}),a.jsx("h1",{className:"font-bold text-xl text-slate-900",children:f("help.title")}),a.jsx("button",{onClick:()=>e("DASHBOARD"),className:"p-2 -mr-2 text-slate-400 hover:text-red-600 transition-colors",title:f("btn.cancel"),children:a.jsx(k,{size:24})})]}),a.jsx(T,{current:s,total:5})]}),a.jsxs("div",{className:"flex-1 p-6 space-y-8 animate-fade-in overflow-y-auto pb-32",children:[1===s&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xl font-bold text-slate-900",children:f("help.safe_q")}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("button",{onClick:()=>pe({isSafe:!0}),className:"p-4 rounded-xl border-2 font-bold transition-all "+(!0===o.isSafe?"border-brand-600 bg-brand-50 text-brand-800":"border-slate-300 bg-white text-slate-700"),children:f("help.yes_safe")}),a.jsx("button",{onClick:()=>pe({isSafe:!1}),className:"p-4 rounded-xl border-2 font-bold transition-all "+(!1===o.isSafe?"border-red-600 bg-red-50 text-red-800":"border-slate-300 bg-white text-slate-700"),children:f("help.no_danger")})]})]}),!1===o.isSafe&&a.jsxs("div",{className:"bg-red-600 text-white p-6 rounded-xl shadow-xl animate-pulse space-y-4 border-4 border-red-800",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(AlertOctagon,{size:48,className:"text-white"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-extrabold uppercase tracking-wider",children:"Immediate Danger"}),a.jsx("p",{className:"font-medium text-red-100",children:"Do not rely solely on this app."})]})]}),a.jsx(g,{fullWidth:!0,size:"xl",className:"bg-white text-red-700 hover:bg-red-50 font-black text-2xl shadow-lg",onClick:()=>window.location.href="tel:911",children:"CALL 911 NOW"}),a.jsx("p",{className:"text-center text-sm font-bold opacity-80",children:"If you cannot call, continue filling this form."})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:f("help.location")}),X&&a.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold text-green-600 bg-green-50 px-2 py-0.5 rounded border border-green-100 animate-pulse",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"})," LIVE TRACKING"]}),ee&&a.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold text-amber-600 bg-amber-50 px-2 py-0.5 rounded border border-amber-100",children:[a.jsx(A,{size:10})," APPROX (IP)"]})]}),a.jsx(h,{placeholder:f(X?"help.detecting":"help.manual"),value:o.location||"",onChange:e=>{G(!1),te(!1),de(null),pe({location:e.target.value})},className:"bg-white font-mono text-sm border-slate-300 text-slate-900 font-semibold pr-24 "+(X?"border-brand-500 ring-1 ring-brand-500":ee?"border-amber-500 ring-1 ring-amber-500":Y?"border-red-500":""),error:X||ee||o.location||!K||Y?void 0:K}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("button",{type:"button",onClick:()=>{oe(e=>!e),G(!1),te(!1)},className:"inline-flex items-center gap-2 text-xs font-bold text-slate-700 bg-slate-100 hover:bg-slate-200 px-3 py-1.5 rounded-full",children:[a.jsx(S,{size:12})," ",re?"Hide Map":"Drop a Pin"]}),a.jsxs("button",{type:"button",onClick:()=>{G(!0),oe(!1)},className:"inline-flex items-center gap-2 text-xs font-bold text-brand-700 bg-brand-50 hover:bg-brand-100 px-3 py-1.5 rounded-full",children:[a.jsx(B,{size:12})," Use GPS"]})]})]}),re&&a.jsxs("div",{className:"mt-3 rounded-xl overflow-hidden border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"bg-slate-50 px-3 py-2 text-xs font-semibold text-slate-600 flex items-center gap-2",children:[a.jsx(S,{size:12})," Tap the map to set your exact location"]}),a.jsx("div",{className:"h-64 w-full",children:a.jsxs(u,{center:[ge.lat,ge.lng],zoom:14,scrollWheelZoom:!0,className:"h-full w-full",children:[a.jsx(m,{attribution:"Â© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.jsx(R,{marker:ce,onPick:e=>{G(!1),te(!1),de(e);const t=`${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}`;pe({location:t}),Z(null),_((new Date).toLocaleTimeString()),V(null)}})]})})]}),X&&null!==Q&&a.jsxs("div",{className:"bg-slate-100 rounded-lg p-3 border border-slate-200 -mt-2 shadow-inner",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[(e=>{let t=0,s="bg-slate-300";return e<=15?(t=4,s="bg-green-500"):e<=30?(t=3,s="bg-green-500"):e<=60?(t=2,s="bg-yellow-500"):(t=1,s="bg-red-500"),a.jsxs("div",{className:"flex items-end gap-1 h-3",role:"img","aria-label":`GPS Signal Strength: ${t} of 4 bars`,children:[a.jsx("div",{className:`w-1 rounded-sm ${t>=1?s:"bg-slate-200"} h-1.5`}),a.jsx("div",{className:`w-1 rounded-sm ${t>=2?s:"bg-slate-200"} h-2`}),a.jsx("div",{className:`w-1 rounded-sm ${t>=3?s:"bg-slate-200"} h-2.5`}),a.jsx("div",{className:`w-1 rounded-sm ${t>=4?s:"bg-slate-200"} h-3`})]})})(Q),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider leading-none mb-0.5",children:(je=Q,je?je<=15?"Excellent Signal":je<=30?"Good Signal":je<=60?"Fair Signal":"Weak Signal":"")}),a.jsxs("p",{className:"text-xs text-slate-500 font-mono leading-none",children:["Â± ",Q,"m precision"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"flex items-center gap-1 justify-end text-[10px] text-slate-400 font-bold uppercase mb-0.5",children:[a.jsx(D,{size:10})," Last Update"]}),a.jsx("p",{className:"text-xs text-slate-600 font-mono font-bold leading-none",children:$})]})]}),Q>50&&a.jsxs("div",{className:"flex items-center gap-1.5 mt-2 bg-amber-50 p-1.5 rounded border border-amber-100",children:[a.jsx(z,{size:12,className:"text-amber-600"}),a.jsx("p",{className:"text-[10px] text-amber-700 font-bold",children:"Signal weak. Move outdoors or near windows for better precision."})]})]}),X&&!K&&null===Q&&!ee&&a.jsxs("p",{className:"text-xs text-brand-600 font-medium -mt-2 animate-pulse flex items-center gap-1",children:[a.jsx(y,{size:12,className:"animate-spin"})," Acquiring satellite lock..."]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xl font-bold text-slate-900",children:f("help.what_need")}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{id:"Medical",icon:a.jsx(t,{size:24}),color:"red"},{id:"Fire",icon:a.jsx(L,{size:24}),color:"orange"},{id:"Flood",icon:a.jsx(C,{size:24}),color:"blue"},{id:"Police",icon:a.jsx(M,{size:24}),color:"slate"}].map(e=>a.jsxs("button",{onClick:()=>pe({emergencyType:e.id}),className:"p-4 rounded-xl border flex flex-col items-center gap-2 transition-all "+(o.emergencyType===e.id?`border-${e.color}-600 bg-${e.color}-50 text-${e.color}-900 ring-2 ring-${e.color}-600 ring-offset-1`:"border-slate-300 bg-white text-slate-700 hover:border-slate-400"),children:[e.icon,a.jsx("span",{className:"font-bold text-lg",children:e.id})]},e.id))})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xl font-bold text-slate-900",children:f("help.injured_q")}),a.jsx("div",{className:"flex gap-4",children:["Yes","No"].map(e=>{const t="Yes"===e;return a.jsx(g,{type:"button",variant:o.isInjured===t?"primary":"outline",onClick:()=>pe({isInjured:t}),className:"flex-1 font-bold "+(o.isInjured!==t?"border-slate-300 text-slate-700":""),children:"Yes"===e?"Yes":"No"},e)})})]})]}),2===s&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(p,{label:f("help.situation"),placeholder:"E.g. Water is rising rapidly, trapped in attic...",value:o.situationDescription,onChange:e=>pe({situationDescription:e.target.value}),className:"border-slate-300 text-slate-900"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-lg font-bold text-slate-900",children:f("help.evac_q")}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(g,{variant:!0===o.canEvacuate?"primary":"outline",onClick:()=>pe({canEvacuate:!0}),className:"flex-1 font-bold",children:"Yes"}),a.jsx(g,{variant:!1===o.canEvacuate?"danger":"outline",onClick:()=>pe({canEvacuate:!1}),className:"flex-1 font-bold",children:"No"})]})]}),a.jsx(h,{type:"number",label:f("help.people_count"),min:1,value:o.peopleCount,onChange:e=>pe({peopleCount:parseInt(e.target.value)}),className:"border-slate-300 text-slate-900 font-bold"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-lg font-bold text-slate-900",children:f("help.pets_q")}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(g,{variant:!0===o.petsPresent?"primary":"outline",onClick:()=>pe({petsPresent:!0}),className:"flex-1 font-bold",children:"Yes"}),a.jsx(g,{variant:!1===o.petsPresent?"secondary":"outline",onClick:()=>pe({petsPresent:!1}),className:"flex-1 font-bold",children:"No"})]})]})]}),3===s&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:f("help.resources_title")}),a.jsx("p",{className:"text-slate-600 font-medium text-base",children:f("help.resources_desc")}),[{key:"hasWater",label:"Clean Water",icon:a.jsx(C,{size:18})},{key:"hasFood",label:"Food",icon:a.jsx("span",{className:"text-lg",children:"ðŸ¥«"})},{key:"hasMeds",label:"Medications",icon:a.jsx("span",{className:"text-lg",children:"ðŸ’Š"})},{key:"hasPower",label:"Electricity",icon:a.jsx(E,{size:18})},{key:"hasPhone",label:"Phone Service",icon:a.jsx("span",{className:"text-lg",children:"ðŸ“¶"})}].map(e=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-slate-300 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-slate-100 rounded-lg text-slate-700",children:e.icon}),a.jsx("span",{className:"font-bold text-slate-900",children:e.label})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>pe({[e.key]:!0}),className:"px-4 py-2 rounded-lg text-sm font-bold transition-colors "+(!0===o[e.key]?"bg-green-100 text-green-800 border border-green-200":"bg-slate-100 text-slate-500 border border-slate-200"),children:"Yes"}),a.jsx("button",{onClick:()=>pe({[e.key]:!1}),className:"px-4 py-2 rounded-lg text-sm font-bold transition-colors "+(!1===o[e.key]?"bg-red-100 text-red-800 border border-red-200":"bg-slate-100 text-slate-500 border border-slate-200"),children:"No"})]})]},e.key))]}),4===s&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-lg font-bold text-slate-900",children:f("help.vuln_title")}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Elderly","Infants","Disabled","Pregnant"].map(e=>a.jsx("button",{onClick:()=>{const t=o.vulnerableGroups,s=t.includes(e)?t.filter(t=>t!==e):[...t,e];pe({vulnerableGroups:s})},className:"p-3 rounded-lg border text-sm font-bold transition-all "+(o.vulnerableGroups.includes(e)?"bg-brand-50 border-brand-500 text-brand-800":"bg-white border-slate-300 text-slate-600"),children:e},e))})]}),a.jsx(p,{label:f("help.medical_cond"),placeholder:"Diabetes, requires dialysis, wheelchair user...",value:o.medicalConditions,onChange:e=>pe({medicalConditions:e.target.value}),className:"border-slate-300"})]}),5===s&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:f("help.review")}),a.jsxs("div",{className:"bg-white rounded-xl border border-slate-300 p-4 space-y-4 shadow-sm",children:[a.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-2",children:[a.jsx("span",{className:"text-slate-600 font-medium",children:"Emergency Type"}),a.jsx("span",{className:"font-bold text-slate-900",children:o.emergencyType||"Not specified"})]}),a.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-2",children:[a.jsx("span",{className:"text-slate-600 font-medium",children:"People Count"}),a.jsx("span",{className:"font-bold text-slate-900",children:o.peopleCount})]}),a.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-2",children:[a.jsx("span",{className:"text-slate-600 font-medium",children:"Injuries"}),a.jsx("span",{className:"font-bold text-slate-900",children:o.isInjured?"Yes":"No"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-600 font-medium",children:"Location"}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"block font-bold truncate max-w-[150px] font-mono text-xs text-slate-900",children:o.location||"Pending..."}),X?a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsxs("span",{className:"text-[10px] text-green-700 font-bold flex items-center justify-end gap-1",children:[a.jsx(y,{size:10,className:"animate-spin"})," Live"]}),Q&&a.jsxs("span",{className:"text-[10px] text-slate-500 font-mono",children:["Â±",Q,"m"]})]}):ee?a.jsxs("span",{className:"text-[10px] text-amber-600 font-bold flex items-center justify-end gap-1",children:[a.jsx(A,{size:10})," Network (Approx)"]}):a.jsxs("span",{className:"text-[10px] text-slate-500 font-bold flex items-center justify-end gap-1",children:[a.jsx(S,{size:10})," Manual/Frozen"]})]})]})]})]})]}),a.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-slate-200 z-30",children:a.jsx("div",{className:"max-w-md mx-auto flex gap-4",children:s<5?a.jsx(g,{fullWidth:!0,onClick:()=>r(e=>Math.min(e+1,5)),size:"lg",className:"font-bold text-lg",children:f("btn.next")}):a.jsx(g,{fullWidth:!0,size:"lg",disabled:d,onClick:async()=>{x(!0);const e=n.getLastKnownLocation(),t=o.location||(null==e?void 0:e.location)||"";t&&!o.location&&c(e=>({...e,location:t}));try{const e=await n.submitRequest({...o,location:t});q(e.id),o.emergencyContactPhone&&(U("sending"),i({contactName:o.emergencyContactName,contactPhone:o.emergencyContactPhone,userName:o.fullName,emergencyType:o.emergencyType,description:o.situationDescription,location:t,requestId:e.id}).then(()=>U("sent")).catch(e=>{console.warn("Emergency contact notify failed",e),U("failed")})),I(!0)}catch(s){console.error(s),alert("Failed to submit request. Saved locally; will retry when online.")}finally{x(!1)}},className:"bg-red-600 hover:bg-red-700 font-bold text-lg shadow-lg shadow-red-200",children:d?se?"Saving...":"Sending...":se?"Save for Sync":f("help.submit_btn")})})})]});var je})}}});
