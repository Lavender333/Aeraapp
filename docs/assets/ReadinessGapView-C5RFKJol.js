import{a,j as e,G as o,l as m,aO as p,a7 as h}from"./vendor-react-DZ0IVLBb.js";import{D as b}from"./index-Cbj0oizH.js";import"./vendor-CCVjAPEY.js";import"./vendor-maps-S3fC-LOA.js";import"./vendor-jspdf-Bd23t5aa.js";import"./vendor-supabase-ChvUvA8t.js";const k=({setView:l})=>{const[s,r]=a.useState(null),[c,n]=a.useState(!0);a.useEffect(()=>{let t=!0;return(async()=>{try{const x=await b();t&&r(x)}catch{t&&r(null)}finally{t&&n(!1)}})(),()=>{t=!1}},[]);const i=(s==null?void 0:s.critical_missing_items)||[],d=(s==null?void 0:s.added_items)||[];return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col pb-safe animate-fade-in",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 p-4 sticky top-0 z-20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>l("READINESS"),className:"p-2 -ml-2 text-slate-500 hover:text-slate-800",children:e.jsx(o,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg text-slate-900",children:"Readiness Gaps"}),e.jsx("p",{className:"text-xs text-slate-500",children:"What to prioritize next for your household."})]})]})}),e.jsx("div",{className:"p-4 space-y-4",children:c?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading readiness guidance…"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 p-2 text-center",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-emerald-700",children:"Readiness"}),e.jsxs("p",{className:"text-lg font-black text-emerald-900",children:[Math.round(Number((s==null?void 0:s.readiness_score)||0)),"%"]})]}),e.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-2 text-center",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-amber-700",children:"Risk Tier"}),e.jsx("p",{className:"text-lg font-black text-amber-900",children:(s==null?void 0:s.risk_tier)||"N/A"})]}),e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-2 text-center",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-blue-700",children:"Target Days"}),e.jsxs("p",{className:"text-lg font-black text-blue-900",children:[Number((s==null?void 0:s.recommended_duration_days)||0),"d"]})]})]}),e.jsxs("div",{className:"bg-white border border-red-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(m,{size:16,className:"text-red-600"}),e.jsx("h2",{className:"text-sm font-bold text-red-700 uppercase",children:"Critical Missing Items"})]}),i.length===0?e.jsxs("p",{className:"text-sm text-emerald-700 flex items-center gap-2",children:[e.jsx(p,{size:16})," No critical gaps found."]}):e.jsx("ul",{className:"space-y-2",children:i.map(t=>e.jsxs("li",{className:"text-sm text-slate-800",children:["• ",e.jsx("span",{className:"font-semibold",children:t.item}),t.explanation?e.jsxs("span",{className:"text-slate-500",children:[" — ",t.explanation]}):null]},t.id))})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(h,{size:16,className:"text-slate-700"}),e.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase",children:"Recommended Additions"})]}),d.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No additional items recommended right now."}):e.jsx("ul",{className:"space-y-2",children:d.slice(0,12).map(t=>e.jsxs("li",{className:"text-sm text-slate-800",children:["• ",e.jsx("span",{className:"font-semibold",children:t.item})," ",e.jsxs("span",{className:"text-[11px] uppercase text-slate-500",children:["(",t.priority,")"]})]},t.id))})]}),e.jsx("button",{onClick:()=>l("READINESS"),className:"w-full rounded-xl bg-slate-900 text-white py-3 text-sm font-semibold",children:"Open Readiness Checklist"})]})})]})};export{k as ReadinessGapView};
